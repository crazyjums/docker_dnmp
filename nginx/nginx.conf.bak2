user  root;
worker_processes     auto;
worker_rlimit_nofile 65535;

error_log  /data/nginx/logs/error.log notice;
pid        /var/run/nginx.pid;


events {
    use epoll;
    worker_connections  8192;
}


http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format combinedio '$remote_addr "$http_x_forwarded_for" - $remote_user [$time_local] "$request" $status $body_bytes_sent '
                          '"$http_referer" "$http_user_agent" $request_length $request_time $upstream_response_time $server_addr';

    access_log off;

    sendfile       on;
    tcp_nopush     on;
    tcp_nodelay    on;

    keepalive_timeout            0;
    client_body_timeout          10;
    client_header_timeout        10;

    client_header_buffer_size    1k;
    large_client_header_buffers  4  4k;
    output_buffers               1  32k;
    client_max_body_size	 64m;
    client_body_buffer_size      256k;

    # 健康检查
    server {
        listen 80 default_server;
        server_name _;
        return 200;
    }

    # nginx common config
    include /etc/nginx/conf.d/*.conf;
    # project config
    include /home/q/system/*/config/nginx/docker.conf;
    # develop config
    include /home/*/workspace/*/config/nginx/docker.conf;
}
